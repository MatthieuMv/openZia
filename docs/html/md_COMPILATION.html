<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>My Project: Compilation</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Compilation </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>In this section we will cover the compilation part of openZia. We will see how to compile it independently, how to add it to your actual CMake project and how to automate module compilation.</p>
<h2>Independent compilation</h2>
<p>You may first want to assert that openZia compiles well in your system. The first dependency is to check your C++ compiler, it must be able to support <b>all C++17 features</b>. You must also have <b>CMake</b> installed with a lower build system like <b>Makefiles</b> or <b>Visual studio solutions</b>. If you wish to start unit tests, you must install <b>Criterion</b> unit-testing library. For the coverage, you will need <b>gcovr</b>.</p>
<p>First, you need to clone the repository and create a build directory: </p><div class="fragment"><div class="line">git clone git https://github.com/MatthieuMv/openZia.git</div><div class="line">cd openZia &amp;&amp; mkdir Build &amp;&amp; cd Build</div></div><!-- fragment --><p>Then, for a simple library build use the following commands </p><div class="fragment"><div class="line">cmake ..</div><div class="line">cmake --build .</div></div><!-- fragment --><p> If you want to run test or see coverage please watch below.</p>
<h2>Add openZia to your CMake project</h2>
<p>First you need add openZia's repository to your submodules. </p><div class="fragment"><div class="line">git submodule add https://github.com/MatthieuMv/openZia.git</div></div><!-- fragment --><p>Next you need to <b>automate compilation</b> of openZia in your <b>CMakeLists.txt</b>, and link your program to it. </p><div class="fragment"><div class="line"># CMakeLists.txt</div><div class="line">cmake_minimum_required(VERSION 3.0)</div><div class="line">project(Server)</div><div class="line"></div><div class="line"># Include directly the openZia.cmake to your CMake build</div><div class="line"># This include gives &#39;openZiaLibs&#39; and &#39;openZiaIncludes&#39; variables.</div><div class="line">include(openZia/openZia/openZia.cmake)</div><div class="line"></div><div class="line"># Create the executable and link openZia library to it</div><div class="line">add_executable(Server main.cpp)</div><div class="line">target_link_libraries(Server ${openZiaLibs})</div><div class="line">target_include_directories(Server PRIVATE ${openZiaIncludes}))</div></div><!-- fragment --><h2>Automate module compilation</h2>
<p>A good practice is to create a directory for each module, and include their **.cmake** file individually. I assume you already included <b>openZia.cmake</b> in your <b>CMakeLists.txt</b> and that you have created a directory named <b>Template</b> which contains the following <b>Template.cmake</b>, <b>Template.hpp</b> and <b>Template.cpp</b>. </p><div class="fragment"><div class="line"># Template.cmake</div><div class="line">project(Template)</div><div class="line"></div><div class="line"># Save this directory as TemplateSourcesDir</div><div class="line">get_filename_component(TemplateSourcesDir ${CMAKE_CURRENT_LIST_FILE}  PATH)</div><div class="line"></div><div class="line">set(TemplateSources</div><div class="line">    ${TemplateSourcesDir}/Template.hpp</div><div class="line">    ${TemplateSourcesDir}/Template.cpp</div><div class="line">)</div><div class="line"></div><div class="line"># Compile the module, and link it to openZia</div><div class="line">add_library(${PROJECT_NAME} SHARED ${TemplateSources})</div><div class="line">target_link_libraries(${PROJECT_NAME} ${openZiaLibs})</div><div class="line">target_include_directories(${PROJECT_NAME} PRIVATE ${openZiaIncludes})</div><div class="line"></div><div class="line"># Copy the library into the binary modules directory</div><div class="line">set_target_properties(${PROJECT_NAME} PROPERTIES</div><div class="line">    LIBRARY_OUTPUT_DIRECTORY  ${CMAKE_BINARY_DIR}/Modules}</div><div class="line">)</div></div><!-- fragment --><h2>Unit tests and code coverage</h2>
<p>If you want to start unit tests replace independent build instruction by: </p><div class="fragment"><div class="line">cmake .. -DOPENZIA_TESTS=TRUE</div><div class="line">cmake --build .</div><div class="line">./openZiaTests</div></div><!-- fragment --><p>If you want code coverage then: </p><div class="fragment"><div class="line">cmake .. -DOPENZIA_TESTS=TRUE -DOPENZIA_COVERAGE=TRUE</div><div class="line">cmake --build .</div><div class="line">./openZiaTests</div><div class="line">cd ..</div><div class="line">gcovr --exclude Tests</div></div><!-- fragment --> </div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.15
</small></address>
</body>
</html>
